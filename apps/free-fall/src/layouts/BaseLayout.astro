---
// biome-ignore lint/correctness/noUnusedImports: used in template
import AppShell from "@free-fall/design-system/components/AppShell.astro";
import { getCoreRulebookNavItems } from "../lib/nav.ts";

interface Props {
  title?: string;
  frontmatter?: { title?: string };
}

// biome-ignore lint/correctness/noUnusedVariables: used in template
const title =
  Astro.props.title || Astro.props.frontmatter?.title || "FREE//FALL";

const coreRulebookSubItems = await getCoreRulebookNavItems(Astro.url.pathname);

// biome-ignore lint/correctness/noUnusedVariables: used in template
const navItems = [
  {
    icon: "public",
    label: "Home",
    href: "/",
    active:
      Astro.url.pathname === "/" ||
      Astro.url.pathname.startsWith("/free-fall-core-rulebook/"),
    subItems: coreRulebookSubItems,
  },
];
---

<AppShell title={title} navItems={navItems} brandHref="/about/">
  <slot name="head" slot="head" />
  <slot />
</AppShell>
