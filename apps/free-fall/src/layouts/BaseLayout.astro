---
import AppShell from "@free-fall/design-system/components/AppShell.astro";
import { getCoreRulebookNavItems } from "../lib/nav.ts";

interface Props {
  title?: string;
  frontmatter?: { title?: string };
}

const title =
  Astro.props.title || Astro.props.frontmatter?.title || "FREE//FALL";

const coreRulebookSubItems = await getCoreRulebookNavItems(Astro.url.pathname);

const navItems = [
  {
    icon: "public",
    label: "Home",
    href: "/",
    active: Astro.url.pathname === "/",
  },
  {
    icon: "book_5",
    label: "Core Rules v7",
    href: "/core-rulebook/00-intro/",
    active: Astro.url.pathname.startsWith("/core-rulebook/"),
    subItems: coreRulebookSubItems,
  },
];
---

<AppShell title={title} navItems={navItems} brandHref="/about/">
  <slot name="head" slot="head" />
  <slot />
</AppShell>
